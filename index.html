<!DOCTYPE html>
<html>
<head>
    <title>–ò–≥—Ä–∞ –ù–æ–≤—ã–π –ì–æ–¥</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        #gameCanvas {
            border: 2px solid red;
            background: #001933;
            touch-action: none;
            border-radius: 12px;
        }
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: #ffffff;
        }
        #mobileControls {
            margin-top: 20px;
            display: none;
        }
        .controlBtn {
            width: 60px;
            height: 60px;
            margin: 5px;
            background: rgba(177, 177, 177, 0.3);
            border: none;
            border-radius: 50%;
            color: rgb(255, 0, 0);
            font-size: 24px;
            touch-action: none;
        }

        .title {
            font-size: 25px;
            color: rgb(255, 0, 0);
            text-align: center;
            margin: 12px;
        }

        #timer {
            color: rgb(255, 140, 0);
            font-size: 24px;
            margin-bottom: 10px;
        }

        #victory {
            position: relative;
            width: 90%;
            z-index: 1000;
            border-radius: 25px;
            display: none;
        }

        .game-button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 18px;
            background-color: #ff0000 ;
            color: rgb(255, 255, 255);
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all ease 0.3s;
        }

        .game-button:hover {
            background: #45a049;
        }


        @media (max-width: 700px) {
            #gameCanvas {
                width: 90vw;
                height: 90vw;
            }
            #mobileControls {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <h1 class="title">–°–æ–±–µ—Ä–∏—Ç–µ –≤—Å–µ –ø–æ–¥–∞—Ä–∫–∏ <br> –∫ –ù–æ–≤–æ–º—É –ì–æ–¥—É  <br> üéÖ üéÑ üéÅ</h1>
    <div id="timer">–í—Ä–µ–º—è: 60</div>
    <canvas id="gameCanvas" width="400" height="400"></canvas>
    <img id="victory" src="img/dedmoroz-snegurochka.jpg" alt="">
    <div id="mobileControls">
        <button class="controlBtn" id="leftBtn">‚Üê</button>
        <button class="controlBtn" id="upBtn">‚Üë</button>
        <button class="controlBtn" id="rightBtn">‚Üí</button>
        <button class="controlBtn" id="dummy"></button>
        <button class="controlBtn" id="downBtn">‚Üì</button>
        <button class="controlBtn" id="dummy2"></button>
    </div>
    <button class="game-button" onclick="location.reload()">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const timerElement = document.getElementById('timer');
        
        const santaImg = new Image();
        santaImg.src = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSIjRUQxQzI0IiBkPSJNMzg0IDM1MmMwIDcwLjctNTcuMyAxMjgtMTI4IDEyOHMtMTI4LTU3LjMtMTI4LTEyOHM1Ny4zLTEyOCAxMjgtMTI4czEyOCA1Ny4zIDEyOCAxMjh6Ii8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTI1NiAzMjBjLTE3LjcgMC0zMiAxNC4zLTMyIDMyczE0LjMgMzIgMzIgMzJzMzItMTQuMyAzMi0zMnMtMTQuMy0zMi0zMi0zMnptMTI4LTMyYy0xNy43IDAtMzIgMTQuMy0zMiAzMnMxNC4zIDMyIDMyIDMyIDMyLTE0LjMgMzItMzItMTQuMy0zMi0zMi0zMnptLTI1NiAwYy0xNy43IDAtMzIgMTQuMy0zMiAzMnMxNC4zIDMyIDMyIDMyIDMyLTE0LjMgMzItMzItMTQuMy0zMi0zMi0zMnoiLz48L3N2Zz4=';
        
        const presentImg = new Image();
        presentImg.src = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSIjRkYwMDAwIiBkPSJNOTYgMTkyaDMyMHYzMjBIOTZ6Ii8+PHBhdGggZmlsbD0iI0ZGRkYwMCIgZD0iTTIyNCAxOTJ2MzIwaDE2NFYxOTJ6Ii8+PHBhdGggZmlsbD0iI0ZGMDAwMCIgZD0iTTY0IDk2aDM4NHY5Nkg2NHoiLz48cGF0aCBmaWxsPSIjRkZGRjAwIiBkPSJNMjQwIDk2aDE5MnY5NkgyNDB6Ii8+PC9zdmc+';

        let santa = {
            x: 175,
            y: 175,
            size: 100,
            speed: 7
        };
        
        let present = {
            x: Math.random() * (canvas.width - 20),
            y: Math.random() * (canvas.height - 20),
            size: 40
        };
        
        let score = 50;
        let timeLeft = 60;
        let gameActive = true;
        let snowflakes = [];
        
        // –°–æ–∑–¥–∞–µ–º —Å–Ω–µ–∂–∏–Ω–∫–∏
        for(let i = 0; i < 50; i++) {
            snowflakes.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                size: Math.random() * 3 + 1,
                speed: Math.random() * 2 + 1
            });
        }
        
        // –¢–∞–π–º–µ—Ä
        const timer = setInterval(() => {
            if (timeLeft > 0 && gameActive) {
                timeLeft--;
                timerElement.textContent = `–í—Ä–µ–º—è: ${timeLeft}`;
            } else if (timeLeft === 0) {
                gameActive = false;
                clearInterval(timer);
                alert(`–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –ü–æ–¥–∞—Ä–∫–∏ –Ω–µ —Å–æ–±—Ä–∞–Ω—ã: ${score} \n\n–ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑!`);
            }
        }, 1000);
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ
        document.addEventListener('keydown', handleKeyDown);
        
        function handleKeyDown(e) {
            if (gameActive) {
                moveCharacter(e.key);
            }
        }
        
        // –ú–æ–±–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        const mobileButtons = {
            'leftBtn': 'ArrowLeft',
            'rightBtn': 'ArrowRight',
            'upBtn': 'ArrowUp',
            'downBtn': 'ArrowDown'
        };
        
        Object.keys(mobileButtons).forEach(btnId => {
            const btn = document.getElementById(btnId);
            if (btn) {
                ['touchstart', 'mousedown'].forEach(eventType => {
                    btn.addEventListener(eventType, (e) => {
                        e.preventDefault();
                        if (gameActive) {
                            for (let i = 0; i < 7; i += 1) {
                                moveCharacter(mobileButtons[btnId]);
                            };
                        }
                    });
                });
            }
        });
        
        function moveCharacter(direction) {
            switch(direction) {
                case 'ArrowUp':
                    if (santa.y > 0) santa.y -= santa.speed;
                    break;
                case 'ArrowDown':
                    if (santa.y < canvas.height - santa.size) santa.y += santa.speed;
                    break;
                case 'ArrowLeft':
                    if (santa.x > 0) santa.x -= santa.speed;
                    break;
                case 'ArrowRight':
                    if (santa.x < canvas.width - santa.size) santa.x += santa.speed;
                    break;
            }
            checkCollision();
        }
        
        function checkCollision() {
            if (santa.x < present.x + present.size &&
                santa.x + santa.size > present.x &&
                santa.y < present.y + present.size &&
                santa.y + santa.size > present.y) {
                score--;
                present.x = Math.random() * (canvas.width - present.size);
                present.y = Math.random() * (canvas.height - present.size);
            }
        }
        
        function updateSnow() {
            snowflakes.forEach(snow => {
                snow.y += snow.speed;
                if (snow.y > canvas.height) {
                    snow.y = 0;
                    snow.x = Math.random() * canvas.width;
                }
            });
        }
        
        function draw() {
            if (!gameActive) return;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // –†–∏—Å—É–µ–º —Å–Ω–µ–≥
            ctx.fillStyle = 'white';
            snowflakes.forEach(snow => {
                ctx.beginPath();
                ctx.arc(snow.x, snow.y, snow.size, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // –†–∏—Å—É–µ–º –°–∞–Ω—Ç—É
            ctx.drawImage(santaImg, santa.x, santa.y, santa.size, santa.size);
            
            // –†–∏—Å—É–µ–º –ø–æ–¥–∞—Ä–æ–∫
            ctx.drawImage(presentImg, present.x, present.y, present.size, present.size);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—á–µ—Ç
            ctx.fillStyle = 'white';
            ctx.font = '20px Arial';
            ctx.fillText('–û—Å—Ç–∞–ª–æ—Å—å –ø–æ–¥–∞—Ä–æ–∫: ' + score, 10, 30);
            
            updateSnow();
            requestAnimationFrame(draw);

            if (score <= 0) {
                victory();
            }
        }

        // –ü–æ–±–µ–¥–∞
        function victory() {
            gameActive = false;
            clearInterval(timer);
            const canvas = document.getElementById('gameCanvas');
            canvas.style.display = 'none';
            const victory = document.getElementById('victory');
            victory.style.display = 'block';
            setTimeout("alert(`–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –¢—ã —Å–æ–±—Ä–∞–ª –≤—Å–µ –ø–æ–¥–∞—Ä–∫–∏ –∑–∞ ${60 - timeLeft} —Å–µ–∫—É–Ω–¥ \n\n–° –Ω–∞—Å—Ç—É–ø–∞—é—â–∏–º –ù–æ–≤—ã–º –ì–æ–¥–æ–º! \n\n–ñ–µ–ª–∞–µ–º —Ç–µ–±–µ –°—á–∞—Å—Ç—å—è, –ó–¥–æ—Ä–æ–≤—å—è, –õ—é–±–≤–∏, –£–¥–∞—á–∏ –∏ –ë–æ–≥–∞—Ç—Å—Ç–≤–∞!`)", 1000); 
        }
        
        // –ù–∞—á–∏–Ω–∞–µ–º –∏–≥—Ä—É –∫–æ–≥–¥–∞ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        Promise.all([
            new Promise(resolve => santaImg.onload = resolve),
            new Promise(resolve => presentImg.onload = resolve)
        ]).then(() => {
            draw();
        });

        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
        // document.addEventListener('touchmove', function(e) {
        //     e.preventDefault();
        // }, { passive: false });
    </script>
</body>
</html>




